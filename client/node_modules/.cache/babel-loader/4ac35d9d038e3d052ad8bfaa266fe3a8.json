{"ast":null,"code":"import _toConsumableArray from\"/Users/yong/development/projects/rxinteraction/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/yong/development/projects/rxinteraction/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/yong/development/projects/rxinteraction/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yong/development/projects/rxinteraction/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yong/development/projects/rxinteraction/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useDebounce}from\"../hooks/debounceHook\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export var DrugContext=/*#__PURE__*/React.createContext();var userAxios=axios.create();userAxios.interceptors.request.use(function(config){var token=localStorage.getItem(\"token\");config.headers.Authorization=\"Bearer \".concat(token);return config;});function DrugProvider(props){var initState={user:JSON.parse(localStorage.getItem(\"user\"))||{},token:localStorage.getItem(\"token\")||\"\",notes:[],errMsg:\"\"};// console.log(\"initstate: \", selectedMeds)\nvar _useState=useState(initState),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),rxcuiQuery=_useState6[0],setRxcuiQuery=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),noMedNames=_useState8[0],setNoMedNames=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),medNames=_useState10[0],setMedNames=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedMeds=_useState12[0],setSelectedMeds=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isLoading=_useState14[0],setLoading=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),interactions=_useState16[0],setInteractions=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),noRxcuis=_useState18[0],setNoRxcuis=_useState18[1];var prepareSearchQuery=function prepareSearchQuery(query){var url=\"https://rxnav.nlm.nih.gov/REST/drugs.json?name=\".concat(query);return encodeURI(url);};var prepareCrossInteraction=function prepareCrossInteraction(query){var url=\"https://rxnav.nlm.nih.gov/REST/interaction/list.json?rxcuis=\".concat(query);return encodeURI(url);};var searchMedName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var URL,res,medData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!searchQuery||searchQuery.trim()===\"\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);setNoMedNames(false);URL=prepareSearchQuery(searchQuery);_context.next=7;return axios.get(URL).catch(function(err){console.log(\"Error: \",err);});case 7:res=_context.sent;if(res){// console.log(\"Response: res.data\", res.data)\nconsole.log(\"object length: \",Object.keys(res.data.drugGroup).length);// console.log(\"object: \", Object.keys(res.data.drugGroup))\n// console.log(\"drugGroup: \", res.data.drugGroup.conceptGroup[res.data.drugGroup.conceptGroup.length-1].conceptProperties)\nmedData=res.data.drugGroup.conceptGroup;Object.keys(res.data.drugGroup).length>=2?setMedNames(medData[medData.length-1].conceptProperties):setNoMedNames(true);}setLoading(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function searchMedName(){return _ref.apply(this,arguments);};}();var searchCrossInteraction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var URL,res,_res$data,_res$data$fullInterac,_res$data$fullInterac2,rxcuiData,interactionData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!rxcuiQuery||rxcuiQuery.trim()===\"\")){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:setLoading(true);setNoRxcuis(false);URL=prepareCrossInteraction(rxcuiQuery);_context2.next=7;return axios.get(URL).catch(function(err){console.log(\"Error: \",err);});case 7:res=_context2.sent;if(res){console.log(res.data.nlmDisclaimer);try{rxcuiData=(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$fullInterac=_res$data.fullInteractionTypeGroup[0])===null||_res$data$fullInterac===void 0?void 0:(_res$data$fullInterac2=_res$data$fullInterac.fullInteractionType[0])===null||_res$data$fullInterac2===void 0?void 0:_res$data$fullInterac2.interactionPair[0];interactionData=rxcuiData.description;console.log(Object.keys(res.data).length);// console.log(\"rxcuiData: \", rxcuiData)\n// console.log(\"Interaction: \", interactionData)\nif(!res.data.fullInteractionTypeGroup){setNoRxcuis(true);}else{setInteractions(interactionData);}}catch(_unused){setInteractions(\"\");}}setLoading(false);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function searchCrossInteraction(){return _ref2.apply(this,arguments);};}();var signup=function signup(credentials){axios.post(\"/auth/signup\",credentials).then(function(res){var _res$data2=res.data,user=_res$data2.user,token=_res$data2.token;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(user));setUserState(function(prevUserState){return _objectSpread(_objectSpread({},prevUserState),{},{user:user,token:token});});}).catch(function(err){return handleAuthErr(err.response.data.errMsg);});};var login=function login(credentials){axios.post(\"/auth/login\",credentials).then(function(res){var _res$data3=res.data,user=_res$data3.user,token=_res$data3.token;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(user));localStorage.removeItem(\"selectedMeds\");getUserNotes();getMedList();setUserState(function(prevUserState){return _objectSpread(_objectSpread({},prevUserState),{},{user:user,token:token});});}).catch(function(err){return handleAuthErr(err.response.data.errMsg);});};var logout=function logout(){localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");localStorage.removeItem(\"selectedMeds\");setUserState({user:{},token:\"\",notes:[]});setSelectedMeds([]);setInteractions([]);};var handleAuthErr=function handleAuthErr(errMsg){setUserState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{errMsg:errMsg});});};var resetAuthErr=function resetAuthErr(){setUserState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{errMsg:\"\"});});};var addMedList=function addMedList(newMeds){axios.post(\"/rxlist\",newMeds).then(function(res){console.log(\"i am res.data:\",res.data);// const myMedList = [...selectedMeds, newMeds]\nsetSelectedMeds(function(prevState){console.log(\"Saved into setSelectedMeds\",res.data);return[].concat(_toConsumableArray(prevState),[newMeds]);});//if res.data in put in, the data delay of 1 is visible for selectedMeds; newMeds is direct\n}).catch(function(err){return console.log(err.response.data.errMsg);});console.log(\"context line 93:\",selectedMeds);};//this prevents the each keystroke of every keyword in the search\nuseDebounce(searchQuery,750,searchMedName);useDebounce(rxcuiQuery,750,searchCrossInteraction);//trial useraxios user token route\nvar addMedListLocalStorage=function addMedListLocalStorage(newMeds){if(initState.token){userAxios.post(\"/api/rxlist\",newMeds).then(function(res){console.log(\"addMedListLocalStorage function :\",res.data);// const myMedList = [...selectedMeds, newMeds]\nsetSelectedMeds(function(prevState){return[].concat(_toConsumableArray(prevState),[newMeds]);});}).catch(function(err){return console.log(err.response.data.errMsg);});}else{var newSelected=[].concat(_toConsumableArray(selectedMeds),[newMeds]);localStorage.setItem(\"selectedMeds\",JSON.stringify(newSelected));setSelectedMeds(newSelected);}};//trial getmedlist from localStorage\nvar getMedList=function getMedList(){//    localStorage.getItem(\"selectedMeds\")\nif(initState.token){userAxios.get(\"api/rxlist/user\").then(function(res){setSelectedMeds(res.data);}).catch(function(err){return console.log(err.response.data.errMsg);});}else{JSON.parse(localStorage.getItem(\"selectedMeds\"));}};var deleteMedList=function deleteMedList(medId,rxcui){if(initState.token){userAxios.delete(\"/api/rxlist/\".concat(medId)).then(function(res){console.log(medId);console.log(selectedMeds.filter(function(med){return med._id!==medId;}));setSelectedMeds(function(prevState){return prevState.filter(function(med){return med._id!==medId;});});}).catch(function(err){return console.log(err.response.data.errMsg);});}else{var deletedList=[selectedMeds.filter(function(rxcui){return rxcui.rxcui!==rxcui.rxcui;})];localStorage.removeItem(\"selectedMeds\",JSON.stringify(deletedList));setSelectedMeds(deletedList);}};var getUserNotes=function getUserNotes(){userAxios.get(\"/api/notes/user\").then(function(res){return setUserState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{notes:res.data});});}).catch(function(err){return console.log(err.response.data.errMsg);});};var addNote=function addNote(newNote){userAxios.post(\"api/notes\",newNote).then(function(res){setUserState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{notes:[].concat(_toConsumableArray(prevState.notes),[res.data])});});}).catch(function(err){return console.log(err.response.data.errMsg);});};var deleteNote=function deleteNote(noteId){userAxios.delete(\"/api/notes/\".concat(noteId)).then(function(res){console.log(noteId);return setUserState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{notes:_toConsumableArray(prevState.notes.filter(function(note){console.log(\"remaining issue: \",note._id);return note._id!==noteId;}))});});}).catch(function(err){return console.log(err.response.data.errMsg);});};useEffect(function(){JSON.parse(localStorage.getItem(\"selectedMeds\"));},[selectedMeds]);console.log(selectedMeds.map(function(el){return el.rxcui;}));return/*#__PURE__*/_jsx(DrugContext.Provider,{value:_objectSpread(_objectSpread({setSearchQuery:setSearchQuery,searchQuery:searchQuery,setRxcuiQuery:setRxcuiQuery,rxcuiQuery:rxcuiQuery,noMedNames:noMedNames,setNoMedNames:setNoMedNames,medNames:medNames,setMedNames:setMedNames,setSelectedMeds:setSelectedMeds,selectedMeds:selectedMeds,isLoading:isLoading,setLoading:setLoading,addMedList:addMedList,getMedList:getMedList,setInteractions:setInteractions,interactions:interactions,deleteMedList:deleteMedList,searchCrossInteraction:searchCrossInteraction,noRxcuis:noRxcuis,setNoRxcuis:setNoRxcuis,addMedListLocalStorage:addMedListLocalStorage},userState),{},{signup:signup,login:login,logout:logout,addNote:addNote,getUserNotes:getUserNotes,resetAuthErr:resetAuthErr,deleteNote:deleteNote,userAxios:userAxios}),children:props.children});}export default DrugProvider;","map":{"version":3,"names":["useDebounce","React","useEffect","useState","axios","DrugContext","createContext","userAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","DrugProvider","props","initState","user","JSON","parse","notes","errMsg","userState","setUserState","searchQuery","setSearchQuery","rxcuiQuery","setRxcuiQuery","noMedNames","setNoMedNames","medNames","setMedNames","selectedMeds","setSelectedMeds","isLoading","setLoading","interactions","setInteractions","noRxcuis","setNoRxcuis","prepareSearchQuery","query","url","encodeURI","prepareCrossInteraction","searchMedName","trim","URL","get","catch","err","console","log","res","Object","keys","data","drugGroup","length","medData","conceptGroup","conceptProperties","searchCrossInteraction","nlmDisclaimer","rxcuiData","fullInteractionTypeGroup","fullInteractionType","interactionPair","interactionData","description","signup","credentials","post","then","setItem","stringify","prevUserState","handleAuthErr","response","login","removeItem","getUserNotes","getMedList","logout","prevState","resetAuthErr","addMedList","newMeds","addMedListLocalStorage","newSelected","deleteMedList","medId","rxcui","delete","filter","med","_id","deletedList","addNote","newNote","deleteNote","noteId","note","map","el","children"],"sources":["/Users/yong/development/projects/rxinteraction/client/src/context/DrugProvider.js"],"sourcesContent":["import { useDebounce } from \"../hooks/debounceHook\"\nimport React, { useEffect, useState } from \"react\"\nimport axios from \"axios\"\n\nexport const DrugContext = React.createContext()\n\nconst userAxios = axios.create()\n\nuserAxios.interceptors.request.use((config) => {\n  const token = localStorage.getItem(\"token\")\n  config.headers.Authorization = `Bearer ${token}`\n  return config\n})\n\nfunction DrugProvider(props) {\n  const initState = {\n    user: JSON.parse(localStorage.getItem(\"user\")) || {},\n    token: localStorage.getItem(\"token\") || \"\",\n    notes: [],\n    errMsg: \"\",\n  }\n  // console.log(\"initstate: \", selectedMeds)\n\n  const [userState, setUserState] = useState(initState)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [rxcuiQuery, setRxcuiQuery] = useState(\"\")\n  const [noMedNames, setNoMedNames] = useState(false)\n  const [medNames, setMedNames] = useState([])\n  const [selectedMeds, setSelectedMeds] = useState([])\n  const [isLoading, setLoading] = useState(false)\n  const [interactions, setInteractions] = useState([])\n  const [noRxcuis, setNoRxcuis] = useState(false)\n\n  const prepareSearchQuery = (query) => {\n    const url = `https://rxnav.nlm.nih.gov/REST/drugs.json?name=${query}`\n    return encodeURI(url)\n  }\n\n  const prepareCrossInteraction = (query) => {\n    const url = `https://rxnav.nlm.nih.gov/REST/interaction/list.json?rxcuis=${query}`\n    return encodeURI(url)\n  }\n\n  const searchMedName = async () => {\n    if (!searchQuery || searchQuery.trim() === \"\") return\n\n    setLoading(true)\n    setNoMedNames(false)\n\n    const URL = prepareSearchQuery(searchQuery)\n\n    const res = await axios.get(URL).catch((err) => {\n      console.log(\"Error: \", err)\n    })\n\n    if (res) {\n      // console.log(\"Response: res.data\", res.data)\n      console.log(\"object length: \", Object.keys(res.data.drugGroup).length)\n      // console.log(\"object: \", Object.keys(res.data.drugGroup))\n      // console.log(\"drugGroup: \", res.data.drugGroup.conceptGroup[res.data.drugGroup.conceptGroup.length-1].conceptProperties)\n      const medData = res.data.drugGroup.conceptGroup\n      Object.keys(res.data.drugGroup).length >= 2\n        ? setMedNames(medData[medData.length - 1].conceptProperties)\n        : setNoMedNames(true)\n    }\n    setLoading(false)\n  }\n\n  const searchCrossInteraction = async () => {\n    if (!rxcuiQuery || rxcuiQuery.trim() === \"\") return\n    setLoading(true)\n    setNoRxcuis(false)\n\n    const URL = prepareCrossInteraction(rxcuiQuery)\n    const res = await axios.get(URL).catch((err) => {\n      console.log(\"Error: \", err)\n    })\n\n    if (res) {\n      console.log(res.data.nlmDisclaimer)\n      try {\n        const rxcuiData =\n          res.data?.fullInteractionTypeGroup[0]?.fullInteractionType[0]\n            ?.interactionPair[0]\n        const interactionData = rxcuiData.description\n        console.log(Object.keys(res.data).length)\n        // console.log(\"rxcuiData: \", rxcuiData)\n        // console.log(\"Interaction: \", interactionData)\n        if (!res.data.fullInteractionTypeGroup) {\n          setNoRxcuis(true)\n        } else {\n          setInteractions(interactionData)\n        }\n      } catch {\n        setInteractions(\"\")\n      }\n    }\n    setLoading(false)\n  }\n\n  const signup = (credentials) => {\n    axios\n      .post(\"/auth/signup\", credentials)\n      .then((res) => {\n        const { user, token } = res.data\n        localStorage.setItem(\"token\", token)\n        localStorage.setItem(\"user\", JSON.stringify(user))\n        setUserState((prevUserState) => ({\n          ...prevUserState,\n          user,\n          token,\n        }))\n      })\n      .catch((err) => handleAuthErr(err.response.data.errMsg))\n  }\n\n  const login = (credentials) => {\n    axios\n      .post(\"/auth/login\", credentials)\n      .then((res) => {\n        const { user, token } = res.data\n        localStorage.setItem(\"token\", token)\n        localStorage.setItem(\"user\", JSON.stringify(user))\n        localStorage.removeItem(\"selectedMeds\")\n        getUserNotes()\n        getMedList()\n        setUserState((prevUserState) => ({\n          ...prevUserState,\n          user,\n          token,\n        }))\n      })\n      .catch((err) => handleAuthErr(err.response.data.errMsg))\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"token\")\n    localStorage.removeItem(\"user\")\n    localStorage.removeItem(\"selectedMeds\")\n    setUserState({\n      user: {},\n      token: \"\",\n      notes: [],\n    })\n    setSelectedMeds([])\n    setInteractions([])\n  }\n\n  const handleAuthErr = (errMsg) => {\n    setUserState((prevState) => ({\n      ...prevState,\n      errMsg,\n    }))\n  }\n\n  const resetAuthErr = () => {\n    setUserState((prevState) => ({\n      ...prevState,\n      errMsg: \"\",\n    }))\n  }\n\n  const addMedList = (newMeds) => {\n    axios\n      .post(\"/rxlist\", newMeds)\n      .then((res) => {\n        console.log(\"i am res.data:\", res.data)\n        // const myMedList = [...selectedMeds, newMeds]\n        setSelectedMeds((prevState) => {\n          console.log(\"Saved into setSelectedMeds\", res.data)\n          return [...prevState, newMeds]\n        })\n        //if res.data in put in, the data delay of 1 is visible for selectedMeds; newMeds is direct\n      })\n      .catch((err) => console.log(err.response.data.errMsg))\n    console.log(\"context line 93:\", selectedMeds)\n  }\n\n  //this prevents the each keystroke of every keyword in the search\n  useDebounce(searchQuery, 750, searchMedName)\n  useDebounce(rxcuiQuery, 750, searchCrossInteraction)\n\n  //trial useraxios user token route\n  const addMedListLocalStorage = (newMeds) => {\n    if (initState.token) {\n      userAxios\n        .post(\"/api/rxlist\", newMeds)\n        .then((res) => {\n          console.log(\"addMedListLocalStorage function :\", res.data)\n          // const myMedList = [...selectedMeds, newMeds]\n          setSelectedMeds((prevState) => {\n            return [...prevState, newMeds]\n          })\n        })\n        .catch((err) => console.log(err.response.data.errMsg))\n    } else {\n      const newSelected = [...selectedMeds, newMeds]\n      localStorage.setItem(\"selectedMeds\", JSON.stringify(newSelected))\n      setSelectedMeds(newSelected)\n    }\n  }\n\n  //trial getmedlist from localStorage\n  const getMedList = () => {\n    //    localStorage.getItem(\"selectedMeds\")\n    if (initState.token) {\n      userAxios\n        .get(\"api/rxlist/user\")\n        .then((res) => {\n          setSelectedMeds(res.data)\n        })\n        .catch((err) => console.log(err.response.data.errMsg))\n    } else {\n      JSON.parse(localStorage.getItem(\"selectedMeds\"))\n    }\n  }\n\n  const deleteMedList = (medId, rxcui) => {\n    if (initState.token) {\n      userAxios\n        .delete(`/api/rxlist/${medId}`)\n        .then((res) => {\n          console.log(medId)\n          console.log(selectedMeds.filter((med) => med._id !== medId))\n          setSelectedMeds((prevState) =>\n            prevState.filter((med) => med._id !== medId)\n          )\n        })\n        .catch((err) => console.log(err.response.data.errMsg))\n    } else {\n      const deletedList = [\n        selectedMeds.filter((rxcui) => rxcui.rxcui !== rxcui.rxcui),\n      ]\n      localStorage.removeItem(\"selectedMeds\", JSON.stringify(deletedList))\n      setSelectedMeds(deletedList)\n    }\n  }\n\n  const getUserNotes = () => {\n    userAxios\n      .get(\"/api/notes/user\")\n      .then((res) =>\n        setUserState((prevState) => ({\n          ...prevState,\n          notes: res.data,\n        }))\n      )\n      .catch((err) => console.log(err.response.data.errMsg))\n  }\n\n  const addNote = (newNote) => {\n    userAxios\n      .post(\"api/notes\", newNote)\n      .then((res) => {\n        setUserState((prevState) => ({\n          ...prevState,\n          notes: [...prevState.notes, res.data],\n        }))\n      })\n      .catch((err) => console.log(err.response.data.errMsg))\n  }\n\n  const deleteNote = (noteId) => {\n    userAxios\n      .delete(`/api/notes/${noteId}`)\n      .then((res) => {\n        console.log(noteId)\n        return setUserState((prevState) => ({\n          ...prevState,\n          notes: [\n            ...prevState.notes.filter((note) => {\n              console.log(\"remaining issue: \", note._id)\n              return note._id !== noteId\n            }),\n          ],\n        }))\n      })\n      .catch((err) => console.log(err.response.data.errMsg))\n  }\n\n  useEffect(() => {\n    JSON.parse(localStorage.getItem(\"selectedMeds\"))\n  }, [selectedMeds])\n  console.log(selectedMeds.map((el) => el.rxcui))\n\n  return (\n    <DrugContext.Provider\n      value={{\n        setSearchQuery,\n        searchQuery,\n        setRxcuiQuery,\n        rxcuiQuery,\n        noMedNames,\n        setNoMedNames,\n        medNames,\n        setMedNames,\n        setSelectedMeds,\n        selectedMeds,\n        isLoading,\n        setLoading,\n        addMedList,\n        getMedList,\n        setInteractions,\n        interactions,\n        deleteMedList,\n        searchCrossInteraction,\n        noRxcuis,\n        setNoRxcuis,\n        addMedListLocalStorage,\n        ...userState,\n        signup,\n        login,\n        logout,\n        addNote,\n        getUserNotes,\n        resetAuthErr,\n        deleteNote,\n        userAxios,\n      }}\n    >\n      {props.children}\n    </DrugContext.Provider>\n  )\n}\n\nexport default DrugProvider\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}